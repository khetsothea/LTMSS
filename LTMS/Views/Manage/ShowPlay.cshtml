@model IEnumerable<LTMS.Models.Lotteries.tblResultSA>
@{ ViewBag.Title = "Index"; Layout = "~/Views/Shared/_Layout.cshtml"; }

<div class="wrapper">
    @Html.Partial("~/Views/Shared/Partails/_PartialHeader.cshtml");
    <!-- Left side column. contains the logo and sidebar -->
    @Html.Partial("~/Views/Shared/Partails/_PartialLSidebar.cshtml");
    <!-- Content Wrapper. Contains page content -->
    <div class="content-wrapper">
        <!-- Content Header (Page header) -->
        <section class="content-header">
            <div class="col-xs-4">
                <div class="input-group date row">
                    <div class="input-group-addon hidden-xs">
                        <i class="fa fa-calendar"></i>
                    </div>
                    <input type="text" class="form-control pull-right datepicker" id="datepicker">
                </div>
                <!-- /.input group -->
            </div>
            <div class="left float-left" style="float:left; width:89px;">
                <select class="sp-input" id="sp-agency"></select>
            </div>
            <div class="left float-left" style="float:left; width:58px;">
                <select id="dpShift"><option value="1">ល្ងាច</option><option value="2">យប់</option></select>
            </div>

            <div class="left float-left" style="float:left; width:40px;">
                <button class="btn" id="btnFind">OK</button>
                <!-- /.input group -->
            </div>
            <div class="row no-print">
                <div class="col-xs-12">
                    <button class="btn btn-default" onclick="printDiv()"><i class="fa fa-print"></i> Print</button>

                </div>
            </div>
        </section>
        <!-- Main content -->
        <section class="invoice" id="DivIdToPrint">
            <div id="fdisplay"  class="clearfix">

            </div>
            <div class="clearfix"></div>
        </section>
        <!-- /.content -->

    </div>
    @*Modal*@

    @*End Modal*@
    <!-- /.content-wrapper -->
    @Html.Partial("~/Views/Shared/Partails/_PartialFooter.cshtml");
    <!-- Control Sidebar -->
    @Html.Partial("~/Views/Shared/Partails/_PartialRSidebar.cshtml");
    <!-- /.control-sidebar -->
</div>

@section Scripts
{
    <div>
        <script src="~/Scripts/spjs/spHelpers.js"></script>
        <script>
         var GPROID = '@ViewBag.ID';
        function dRemove(event) {
            var id = event.closest('.RDisplay'); //("..RDisplay");
            // alert();
            id.remove();
        }

        var date = new Date();
        var today = new Date(date.getFullYear(), date.getMonth(), date.getDate());
        //var today1 = date.getDay() + '-' + date.getMonth() + '-' + date.getYear();

        var end = new Date(date.getFullYear(), date.getMonth(), date.getDate());

        $('#datepicker').datepicker({
            format: 'yyyy-mm-dd',
        });

        $(document).ready(function (event) {

            _id = '@Request.QueryString["id"]';
            _pd = '@Request.QueryString["pd"]';
            _sh = '@Request.QueryString["sh"]';

           // alert('@Request.QueryString["id"]');
            var date = new Date();
            $('.sp-input').removeClass('spselected');
            $("#txtNum").addClass("spselected");
            // GET YYYY, MM AND DD FROM THE DATE OBJECT
            var yyyy = date.getFullYear().toString();
            var mm = (date.getMonth() + 1).toString();
            var dd = date.getDate().toString();

            // CONVERT mm AND dd INTO chars
            var mmChars = mm.split('');
            var ddChars = dd.split('');

            // CONCAT THE STRINGS IN YYYY-MM-DD FORMAT
            var datestring = yyyy + '-' + (mmChars[1] ? mm : "0" + mmChars[0]) + '-' + (ddChars[1] ? dd : "0" + ddChars[0]);
            $("#datepicker").val(datestring);
            //var url = "/UtiHelper/_getOptionSelectedListByKeyOder";
            var url = "/UtiHelper/_getOptionListSelectedByKeyOder";
            var id = 3;
            data = JSON.stringify({ id: null });
            dpObject = $("#sp-agency");
          //  fechOption(dpObject, url, null, "Agencies", "AgencyID", "AgencyName", "AgencyID", "AgencyID", "ASC", '@Request.QueryString["id"]', '<option value="0"> --ភ្នាក់ងារ-- </option>');
            fechOptionSelected(dpObject, url, null, "Agencies", "AgencyID", "AgencyName", "AgencyID", "AgencyID", "ASC", '@Request.QueryString["id"]', '<option value="0"> --ភ្នាក់ងារ-- </option>');
            if (_id != '') {
                $("#datepicker").val('@Request.QueryString["pd"]');

               // $("#sp-agency option[value='" + _id + "']").attr("selected", true);
                $("#dpShift").val(_sh);

                loanPlay1(
                '@Request.QueryString["pd"]'
                , '@Request.QueryString["sh"]'
                , 1
                , '@Request.QueryString["id"]'
            )
            }

            $("#btnFind").click(function (event) {
                loanPlay();
            });

        });

        function loanPlay() {
            $("#fdisplay").html("");
            var validate = true;
            if (validate == false) {
                alert('false');
                return;
            } else {

                var error_free = true;
                var url = "/Manage/_ShowPlay";
                //alert(url);
                if (!error_free) {
                    //event.preventDefault();
                }
                else {

                   // var HORGADDID = $('#HORGADDID').val();
                    var _Date = $('#datepicker').val();
                    var Shift = $("#dpShift").val();
                    var Session = 1; //$("#sp-session").val();
                    var CustomerID = $("#sp-agency").val();
                    data = {
                        "PlayDate": _Date
                        , "Shift": Shift
                        , "Session": Session
                        , "CustomerID": CustomerID
                    }

                    $.post(url, data, function (data) {
                        //  alert(data);
                        if (data.Status == "OK") {
                            // PlayID
                            var _post = '';
                            var _Session = '';
                            var _PDisplay = "";
                            var i = 0;
                            var _t = data.Total;
                            var j = 1;
                            var st = "";
                            var s = 0;
                            var _ss = "";
                            var d2 = 0;
                            var d3 = 0;
                            var sd2 = "";
                            var sd3 = "";
                            var SPlayAmounts = "";
                            $.each(data.Result, function (i, item) {
                               // alert(item.PlayID);
                                st = item.ss;
                                sd2 = item.SD2;
                                sd3 = item.SD3;
                                SPlayAmounts = item.SPlayAmounts;
                                var dcount =
                                    data.Result.length;
                                if (item.Session != _Session) {
                                    _post ="";
                                   // alert(item.Session);

                                    if (s > 0) {
                                        _PDisplay += ' ' +
                                                    '                        <tfoot>' +
                                                    '                            <tr>' +
                                                    '                                <td colspan="3" style="border: 1px solid;padding-left: 15px;padding-right: 15px;padding-top: 5px;padding-bottom: 5px;">' +
                                                    '                                    <div>' + (parseInt(d2) + parseInt(d3)) + '</div>' +
                                                    '                                </td>' +
                                                    '                            </tr>' +
                                                    '                            <tr style="color:red;">' +
                                                    '                                <td>D2</td>' +
                                                    '                                <td>:</td>' +
                                                    '                                <td>' + d2 + ' ៛ </td>' +
                                                    '                            </tr>' +
                                                    '                            <tr style="color:red;">' +
                                                    '                                <td>D3</td>' +
                                                    '                                <td>:</td>' +
                                                    '                                <td>' + d3 + ' ៛ </td>' +
                                                    '                            </tr>' +
                                                    '                        </tfoot>' +
                                                    '	</table>' +
                                                    '</div>';
                                    }

                                    d2 = item.D2;
                                    d3 = item.D3;

                                    _PDisplay += '<div class="RDisplay" id="' + item.PlayID + '" style="padding:5px;">' +
                                                 '	<table class=" sptb-display" id="' + item.Post + '">' +
                                                 '                    <table class="text-right pull-right" id="B">';

                                    if (_post != item.Post) {

                                        _PDisplay += '                            <tr>' +
                                                    '                                <td colspan="3">' +
                                                    '                                    <div class="dSession" onclick="dRemove(this);"' +
                                                    '                                         style="padding-right:20px; font:larger; text-align:left; font-weight:bolder;">(' + item.Session + ')' +
                                                    '                                            <span class="dPost" data-value="3">' + item.Post + '</span>' +
                                                    '                                        <i class="glyphicon glyphicon-remove text-red dRemove" style="display:none;"></i>' +
                                                    '                                    </div>' +
                                                    '                                </td>' +
                                                    '                            </tr>' +
                                                    '                       ' +
                                                    '		';

                                        if (item.PlayType == 1) {
                                            _PDisplay += '                            <tr style="' + item.FColor + '">' +
                                                        '                                <td>' + item.Number + '</td>' +
                                                        '                                <td>:</td>' +
                                                        '                                <td>' + item.PlayAmount + ' ៛ </td>' +
                                                        '                            </tr>';
                                        } else if (item.PlayType == 2) {
                                            _PDisplay += '			<tr style="' + item.FColor + '">' +
                                                    '				<td>' + item.Number + '</td>' +
                                                    '				<td>:</td>' +
                                                    '				<td>' + item.PlayAmount + ' ៛ </td>' +
                                                    '				</tr>' +
                                                    '				<td><span><i class="fa fa-long-arrow-down"></i></span></td>' +
                                                    '				<td>(' + item.NumIncrease + '):</td>' +
                                                    '				<td><span><i class="fa fa-long-arrow-down"></i></span></td>' +
                                                    '				</tr>' +
                                                    '			<tr style="' + item.FColor + '">' +
                                                    '				<td>' + item.Number1 + '</td>' +
                                                    '				<td>:</td>' +
                                                    '				<td>' + item.PlayAmount + ' ៛ </td>' +
                                                    '		    </tr>';
                                        } else if (item.PlayType == 5) {
                                            _PDisplay += '			<tr style="' + item.FColor + '">' +
                                                    '				<td>' + item.Number + '</td>' +
                                                    '				<td>x:</td>' +
                                                    '				<td>' + item.PlayAmount + ' ៛ </td>' +
                                                    '				</tr>';
                                        }

                                    }
                                    else {

                                        if (item.PlayType == 1) {
                                            _PDisplay += '			<tr style="' + item.FColor + '">' +
                                                        '				<td>' + item.Number + '</td>' +
                                                        '				<td>:</td>' +
                                                        '				<td>' + item.PlayAmount + ' ៛ </td>' +
                                                        '			</tr>';
                                        } else if (item.PlayType == 2) {
                                            _PDisplay += '			<tr style="' + item.FColor + '">' +
                                                    '				<td>' + item.Number + '</td>' +
                                                    '				<td>:</td>' +
                                                    '				<td>' + item.PlayAmount + ' ៛ </td>' +
                                                    '				</tr>' +
                                                    '				<tr style="' + item.FColor + '"><td><span><i class="fa fa-long-arrow-down"></i></span></td>' +
                                                    '				<td>(' + item.NumIncrease + '):</td>' +
                                                    '				<td><span><i class="fa fa-long-arrow-down"></i></span></td>' +
                                                    '				</tr>' +
                                                    '			<tr style="' + item.FColor + '">' +
                                                    '				<td>' + item.Number1 + '</td>' +
                                                    '				<td>:</td>' +
                                                    '				<td>' + item.PlayAmount + ' ៛ </td>' +
                                                    '		    </tr>';
                                        } else if (item.PlayType == 5) {
                                            _PDisplay += '			<tr style="' + item.FColor + '">' +
                                                    '				<td>' + item.Number + '</td>' +
                                                    '				<td>x:</td>' +
                                                    '				<td>' + item.PlayAmount + ' ៛ </td>' +
                                                    '				</tr>';
                                        }
                                    }

                                    _post = item.Post;
                                    _Session = item.Session;
                                    i = i + 1;
                                    s = s + 1;
                                } else {



                                    _PDisplay += '<div class="RDisplay" id="' + item.PlayID + '" style="padding:5px;">' +
                                                  '	<table class=" sptb-display" id="' + item.Post + '">' +
                                                  '                    <table class="text-right pull-right" id="B">';

                                    if (_post != item.Post) {

                                        _PDisplay += '                            <tr>' +
                                                    '                                <td colspan="3">' +
                                                    '                                    <div class="dSession" onclick="dRemove(this);"' +
                                                    '                                         style="padding-right:20px; font:larger; text-align:left; font-weight:bolder;">(' + item.Session + ')' +
                                                    '                                            <span class="dPost" data-value="3">' + item.Post + '</span>' +
                                                    '                                        <i class="glyphicon glyphicon-remove text-red dRemove" style="display:none;"></i>' +
                                                    '                                    </div>' +
                                                    '                                </td>' +
                                                    '                            </tr>' +
                                                    '                       ' +
                                                    '		';

                                        if (item.PlayType == 1) {
                                            _PDisplay += '                            <tr style="' + item.FColor + '">' +
                                                        '                                <td>' + item.Number + '</td>' +
                                                        '                                <td>:</td>' +
                                                        '                                <td>' + item.PlayAmount + ' ៛ </td>' +
                                                        '                            </tr>';
                                        } else if (item.PlayType == 2) {
                                            _PDisplay += '			<tr style="' + item.FColor + '">' +
                                                    '				<td>' + item.Number + '</td>' +
                                                    '				<td>:</td>' +
                                                    '				<td>' + item.PlayAmount + ' ៛ </td>' +
                                                    '				</tr>' +
                                                    '				<td><span><i class="fa fa-long-arrow-down"></i></span></td>' +
                                                    '				<td>(' + item.NumIncrease + '):</td>' +
                                                    '				<td><span><i class="fa fa-long-arrow-down"></i></span></td>' +
                                                    '				</tr>' +
                                                    '			<tr style="' + item.FColor + '">' +
                                                    '				<td>' + item.Number1 + '</td>' +
                                                    '				<td>:</td>' +
                                                    '				<td>' + item.PlayAmount + ' ៛ </td>' +
                                                    '		    </tr>';
                                        } else if (item.PlayType == 5) {
                                            _PDisplay += '			<tr style="' + item.FColor + '">' +
                                                    '				<td>' + item.Number + '</td>' +
                                                    '				<td>x:</td>' +
                                                    '				<td>' + item.PlayAmount + ' ៛ </td>' +
                                                    '				</tr>';
                                        }

                                    }
                                    else {

                                        if (item.PlayType == 1) {
                                            _PDisplay += '			<tr style="' + item.FColor + '">' +
                                                        '				<td>' + item.Number + '</td>' +
                                                        '				<td>:</td>' +
                                                        '				<td>' + item.PlayAmount + ' ៛ </td>' +
                                                        '			</tr>';
                                        } else if (item.PlayType == 2) {
                                            _PDisplay += '			<tr style="' + item.FColor + '">' +
                                                    '				<td>' + item.Number + '</td>' +
                                                    '				<td>:</td>' +
                                                    '				<td>' + item.PlayAmount + ' ៛ </td>' +
                                                    '				</tr>' +
                                                    '				<tr style="' + item.FColor + '"><td><span><i class="fa fa-long-arrow-down"></i></span></td>' +
                                                    '				<td>(' + item.NumIncrease + '):</td>' +
                                                    '				<td><span><i class="fa fa-long-arrow-down"></i></span></td>' +
                                                    '				</tr>' +
                                                    '			<tr style="' + item.FColor + '">' +
                                                    '				<td>' + item.Number1 + '</td>' +
                                                    '				<td>:</td>' +
                                                    '				<td>' + item.PlayAmount + ' ៛ </td>' +
                                                    '		    </tr>';
                                        } else if (item.PlayType == 5) {
                                            _PDisplay += '			<tr style="' + item.FColor + '">' +
                                                    '				<td>' + item.Number + '</td>' +
                                                    '				<td>x:</td>' +
                                                    '				<td>' + item.PlayAmount + ' ៛ </td>' +
                                                    '				</tr>';
                                        }
                                    }

                                    _post = item.Post;
                                    _Session = item.Session;
                                    i = i + 1;
                                    s = s + 1;

                                }


                            });

                            if (s > 0) {

                                _PDisplay += ' ' +
                                                '                        <tfoot>' +
                                                '                            <tr>' +
                                                '                                <td colspan="3" style="border: 1px solid;padding-left: 15px;padding-right: 15px;padding-top: 5px;padding-bottom: 5px;">' +
                                                '                                    <div>' + (parseInt(d2) + parseInt(d3)) + '</div>' +
                                                '                                </td>' +
                                                '                            </tr>' +
                                                '                            <tr style="color:red;">' +
                                                '                                <td>D2</td>' +
                                                '                                <td>:</td>' +
                                                '                                <td>' + d2 + ' ៛ </td>' +
                                                '                            </tr>' +
                                                '                            <tr style="color:red;">' +
                                                '                                <td>D3</td>' +
                                                '                                <td>:</td>' +
                                                '                                <td>' + d3 + ' ៛ </td>' +
                                                '                            </tr>' +
                                                '                        </tfoot>' +
                                                '	</table>' +
                                                '</div>';
                            }


                            $("#fdisplay").html("");
                            $("#fdisplay").html(_PDisplay);

                            //alert(_PDisplay);
                            var _totalString = '<p class="pSessionline"> </p>' +
                                                '<div class="dSession" style="padding-right:20px; font:larger; clear:both;">' +
                                                '	<table class=" sptb-display" id="tblTotal">' +
                                                '		' +
                                                '			<tr>' +
                                                '				<td>សរ</td>' +
                                                '				<td>=</td>' +
                                                '				<td>' + SPlayAmounts + '</td>' +
                                                '				<td> ' +
                                                '	<table >' +
                                                '			<tr>' +
                                                '				<td> 3លេខ </td>' +
                                                '				<td> = </td>' +
                                                '				<td> ' + sd3 + ' </td>' +
                                                '				<td> </td>' +
                                                '			</tr>' +
                                                '			<tr>' +
                                                '				<td> ២លេខ </td>' +
                                                '				<td> = </td>' +
                                                '				<td> ' + sd2 + ' </td>' +
                                                '				<td> </td>' +
                                                '			</tr>' +
                                                '	</table>' +
                                                '                </td>' +
                                                '			</tr>' +
                                                '		' +
                                                '	</table>' +
                                                '</div>';
                            if (_t != 0) {
                                  $("#fdisplay").append(_totalString);
                            }

                        } else {
                            alert(data.Result);
                            //$('#dialogOrgMember #dialogContent').scrollTop(0);
                        }
                    });
                }
            }
            return false;
        }

        function loanPlay1(
            _Date
            , _Shift
            , _Session
            , _CustomerID
            ) {
            $("#fdisplay").html("");
            var validate = true;
            if (validate == false) {
                alert('false');
                return;
            } else {

                var error_free = true;
                var url = "/Manage/_ShowPlay";
                //alert(url);
                if (!error_free) {
                    //event.preventDefault();
                }
                else {
                   // alert(url);
                    var HORGADDID = $('#HORGADDID').val();
                    var _Date = _Date ; //$('#datepicker').val();
                    var Shift = _Shift; //$("#dpShift").val();
                    var Session = 1; //1; //$("#sp-session").val();
                    var CustomerID = _CustomerID; //$("#sp-agency").val();
                    _data = {
                        "PlayDate": _Date 
                       , "Shift":  Shift 
                       , "Session": Session 
                       , "CustomerID": CustomerID 
                    }
                    //alert(_data)
                    $.post(url, _data, function(data) {
                        //  alert(data);
                        if (data.Status == "OK") {
                            // PlayID
                            var _post = '';
                            var _Session = '';
                            var _PDisplay = "";
                            var i = 0;
                            var _t = data.Total;
                            var j = 1;
                            var st = "";
                            var s = 0;
                            var _ss = "";
                            var d2 = 0;
                            var d3 = 0;
                            var sd2 = "";
                            var sd3 = "";
                            var SPlayAmounts = "";
                            $.each(data.Result, function (i, item) {
                                //alert(item.PlayID);
                                st = item.ss;
                                sd2 = item.SD2;
                                sd3 = item.SD3;
                                SPlayAmounts = item.SPlayAmounts;
                                var dcount =
                                    data.Result.length;
                                if (item.Session != _Session) {
                                    _post = "";
                                    // alert(item.Session);

                                    if (s > 0) {
                                        _PDisplay += ' ' +
                                                    '                        <tfoot>' +
                                                    '                            <tr>' +
                                                    '                                <td colspan="3" style="border: 1px solid;padding-left: 15px;padding-right: 15px;padding-top: 5px;padding-bottom: 5px;">' +
                                                    '                                    <div>' + (parseInt(d2) + parseInt(d3)) + '</div>' +
                                                    '                                </td>' +
                                                    '                            </tr>' +
                                                    '                            <tr style="color:red;">' +
                                                    '                                <td>D2</td>' +
                                                    '                                <td>:</td>' +
                                                    '                                <td>' + d2 + ' ៛ </td>' +
                                                    '                            </tr>' +
                                                    '                            <tr style="color:red;">' +
                                                    '                                <td>D3</td>' +
                                                    '                                <td>:</td>' +
                                                    '                                <td>' + d3 + ' ៛ </td>' +
                                                    '                            </tr>' +
                                                    '                        </tfoot>' +
                                                    '	</table>' +
                                                    '</div>';
                                    }

                                    d2 = item.D2;
                                    d3 = item.D3;

                                    _PDisplay += '<div class="RDisplay" id="' + item.PlayID + '" style="padding:5px;">' +
                                                 '	<table class=" sptb-display" id="' + item.Post + '">' +
                                                 '                    <table class="text-right pull-right" id="B">';

                                    if (_post != item.Post) {

                                        _PDisplay += '                            <tr>' +
                                                    '                                <td colspan="3">' +
                                                    '                                    <div class="dSession" onclick="dRemove(this);"' +
                                                    '                                         style="padding-right:20px; font:larger; text-align:left; font-weight:bolder;">(' + item.Session + ')' +
                                                    '                                            <span class="dPost" data-value="3">' + item.Post + '</span>' +
                                                    '                                        <i class="glyphicon glyphicon-remove text-red dRemove" style="display:none;"></i>' +
                                                    '                                    </div>' +
                                                    '                                </td>' +
                                                    '                            </tr>' +
                                                    '                       ' +
                                                    '		';

                                        if (item.PlayType == 1) {
                                            _PDisplay += '                            <tr style="' + item.FColor + '">' +
                                                        '                                <td>' + item.Number + '</td>' +
                                                        '                                <td>:</td>' +
                                                        '                                <td>' + item.PlayAmount + ' ៛ </td>' +
                                                        '                            </tr>';
                                        } else if (item.PlayType == 2) {
                                            _PDisplay += '			<tr style="' + item.FColor + '">' +
                                                    '				<td>' + item.Number + '</td>' +
                                                    '				<td>:</td>' +
                                                    '				<td>' + item.PlayAmount + ' ៛ </td>' +
                                                    '				</tr>' +
                                                    '				<td><span><i class="fa fa-long-arrow-down"></i></span></td>' +
                                                    '				<td>(' + item.NumIncrease + '):</td>' +
                                                    '				<td><span><i class="fa fa-long-arrow-down"></i></span></td>' +
                                                    '				</tr>' +
                                                    '			<tr style="' + item.FColor + '">' +
                                                    '				<td>' + item.Number1 + '</td>' +
                                                    '				<td>:</td>' +
                                                    '				<td>' + item.PlayAmount + ' ៛ </td>' +
                                                    '		    </tr>';
                                        } else if (item.PlayType == 5) {
                                            _PDisplay += '			<tr style="' + item.FColor + '">' +
                                                    '				<td>' + item.Number + '</td>' +
                                                    '				<td>x:</td>' +
                                                    '				<td>' + item.PlayAmount + ' ៛ </td>' +
                                                    '				</tr>';
                                        }

                                    }
                                    else {

                                        if (item.PlayType == 1) {
                                            _PDisplay += '			<tr style="' + item.FColor + '">' +
                                                        '				<td>' + item.Number + '</td>' +
                                                        '				<td>:</td>' +
                                                        '				<td>' + item.PlayAmount + ' ៛ </td>' +
                                                        '			</tr>';
                                        } else if (item.PlayType == 2) {
                                            _PDisplay += '			<tr style="' + item.FColor + '">' +
                                                    '				<td>' + item.Number + '</td>' +
                                                    '				<td>:</td>' +
                                                    '				<td>' + item.PlayAmount + ' ៛ </td>' +
                                                    '				</tr>' +
                                                    '				<tr style="' + item.FColor + '"><td><span><i class="fa fa-long-arrow-down"></i></span></td>' +
                                                    '				<td>(' + item.NumIncrease + '):</td>' +
                                                    '				<td><span><i class="fa fa-long-arrow-down"></i></span></td>' +
                                                    '				</tr>' +
                                                    '			<tr style="' + item.FColor + '">' +
                                                    '				<td>' + item.Number1 + '</td>' +
                                                    '				<td>:</td>' +
                                                    '				<td>' + item.PlayAmount + ' ៛ </td>' +
                                                    '		    </tr>';
                                        } else if (item.PlayType == 5) {
                                            _PDisplay += '			<tr style="' + item.FColor + '">' +
                                                    '				<td>' + item.Number + '</td>' +
                                                    '				<td>x:</td>' +
                                                    '				<td>' + item.PlayAmount + ' ៛ </td>' +
                                                    '				</tr>';
                                        }
                                    }

                                    _post = item.Post;
                                    _Session = item.Session;
                                    i = i + 1;
                                    s = s + 1;
                                } else {



                                    _PDisplay += '<div class="RDisplay" id="' + item.PlayID + '" style="padding:5px;">' +
                                                  '	<table class=" sptb-display" id="' + item.Post + '">' +
                                                  '                    <table class="text-right pull-right" id="B">';

                                    if (_post != item.Post) {

                                        _PDisplay += '                            <tr>' +
                                                    '                                <td colspan="3">' +
                                                    '                                    <div class="dSession" onclick="dRemove(this);"' +
                                                    '                                         style="padding-right:20px; font:larger; text-align:left; font-weight:bolder;">(' + item.Session + ')' +
                                                    '                                            <span class="dPost" data-value="3">' + item.Post + '</span>' +
                                                    '                                        <i class="glyphicon glyphicon-remove text-red dRemove" style="display:none;"></i>' +
                                                    '                                    </div>' +
                                                    '                                </td>' +
                                                    '                            </tr>' +
                                                    '                       ' +
                                                    '		';

                                        if (item.PlayType == 1) {
                                            _PDisplay += '                            <tr style="' + item.FColor + '">' +
                                                        '                                <td>' + item.Number + '</td>' +
                                                        '                                <td>:</td>' +
                                                        '                                <td>' + item.PlayAmount + ' ៛ </td>' +
                                                        '                            </tr>';
                                        } else if (item.PlayType == 2) {
                                            _PDisplay += '			<tr style="' + item.FColor + '">' +
                                                    '				<td>' + item.Number + '</td>' +
                                                    '				<td>:</td>' +
                                                    '				<td>' + item.PlayAmount + ' ៛ </td>' +
                                                    '				</tr>' +
                                                    '				<td><span><i class="fa fa-long-arrow-down"></i></span></td>' +
                                                    '				<td>(' + item.NumIncrease + '):</td>' +
                                                    '				<td><span><i class="fa fa-long-arrow-down"></i></span></td>' +
                                                    '				</tr>' +
                                                    '			<tr style="' + item.FColor + '">' +
                                                    '				<td>' + item.Number1 + '</td>' +
                                                    '				<td>:</td>' +
                                                    '				<td>' + item.PlayAmount + ' ៛ </td>' +
                                                    '		    </tr>';
                                        } else if (item.PlayType == 5) {
                                            _PDisplay += '			<tr style="' + item.FColor + '">' +
                                                    '				<td>' + item.Number + '</td>' +
                                                    '				<td>x:</td>' +
                                                    '				<td>' + item.PlayAmount + ' ៛ </td>' +
                                                    '				</tr>';
                                        }

                                    }
                                    else {

                                        if (item.PlayType == 1) {
                                            _PDisplay += '			<tr style="' + item.FColor + '">' +
                                                        '				<td>' + item.Number + '</td>' +
                                                        '				<td>:</td>' +
                                                        '				<td>' + item.PlayAmount + ' ៛ </td>' +
                                                        '			</tr>';
                                        } else if (item.PlayType == 2) {
                                            _PDisplay += '			<tr style="' + item.FColor + '">' +
                                                    '				<td>' + item.Number + '</td>' +
                                                    '				<td>:</td>' +
                                                    '				<td>' + item.PlayAmount + ' ៛ </td>' +
                                                    '				</tr>' +
                                                    '				<tr style="' + item.FColor + '"><td><span><i class="fa fa-long-arrow-down"></i></span></td>' +
                                                    '				<td>(' + item.NumIncrease + '):</td>' +
                                                    '				<td><span><i class="fa fa-long-arrow-down"></i></span></td>' +
                                                    '				</tr>' +
                                                    '			<tr style="' + item.FColor + '">' +
                                                    '				<td>' + item.Number1 + '</td>' +
                                                    '				<td>:</td>' +
                                                    '				<td>' + item.PlayAmount + ' ៛ </td>' +
                                                    '		    </tr>';
                                        } else if (item.PlayType == 5) {
                                            _PDisplay += '			<tr style="' + item.FColor + '">' +
                                                    '				<td>' + item.Number + '</td>' +
                                                    '				<td>x:</td>' +
                                                    '				<td>' + item.PlayAmount + ' ៛ </td>' +
                                                    '				</tr>';
                                        }
                                    }

                                    _post = item.Post;
                                    _Session = item.Session;
                                    i = i + 1;
                                    s = s + 1;

                                }


                            });

                            if (s > 0) {

                                _PDisplay += ' ' +
                                                '                        <tfoot>' +
                                                '                            <tr>' +
                                                '                                <td colspan="3" style="border: 1px solid;padding-left: 15px;padding-right: 15px;padding-top: 5px;padding-bottom: 5px;">' +
                                                '                                    <div>' + (parseInt(d2) + parseInt(d3)) + '</div>' +
                                                '                                </td>' +
                                                '                            </tr>' +
                                                '                            <tr style="color:red;">' +
                                                '                                <td>D2</td>' +
                                                '                                <td>:</td>' +
                                                '                                <td>' + d2 + ' ៛ </td>' +
                                                '                            </tr>' +
                                                '                            <tr style="color:red;">' +
                                                '                                <td>D3</td>' +
                                                '                                <td>:</td>' +
                                                '                                <td>' + d3 + ' ៛ </td>' +
                                                '                            </tr>' +
                                                '                        </tfoot>' +
                                                '	</table>' +
                                                '</div>';
                            }


                            $("#fdisplay").html("");
                            $("#fdisplay").html(_PDisplay);

                            //alert(_PDisplay);
                            var _totalString = '<p class="pSessionline"> </p>' +
                                                '<div class="dSession" style="padding-right:20px; font:larger; clear:both;">' +
                                                '	<table class=" sptb-display" id="tblTotal">' +
                                                '		' +
                                                '			<tr>' +
                                                '				<td>សរ</td>' +
                                                '				<td>=</td>' +
                                                '				<td>' + SPlayAmounts + '</td>' +
                                                '				<td> ' +
                                                '	<table >' +
                                                '			<tr>' +
                                                '				<td> 3លេខ </td>' +
                                                '				<td> = </td>' +
                                                '				<td> ' + sd3 + ' </td>' +
                                                '				<td> </td>' +
                                                '			</tr>' +
                                                '			<tr>' +
                                                '				<td> ២លេខ </td>' +
                                                '				<td> = </td>' +
                                                '				<td> ' + sd2 + ' </td>' +
                                                '				<td> </td>' +
                                                '			</tr>' +
                                                '	</table>' +
                                                '                </td>' +
                                                '			</tr>' +
                                                '		' +
                                                '	</table>' +
                                                '</div>';
                            if (_t != 0) {
                                $("#fdisplay").append(_totalString);
                            }

                        } else {
                            alert(data.Result);
                            //$('#dialogOrgMember #dialogContent').scrollTop(0);
                        }
                    });
                    }
                }
                return false;
            }
        </script>
    </div>

}